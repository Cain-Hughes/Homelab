# Week 4 — February 2026

This week I spent some time addressing a few long-standing annoyances in my environment. Nothing particularly dramatic, but the kind of improvements that make day-to-day operation smoother and less fragile.

---

## VPN and Port Forwarding

One area I wanted to revisit involved Gluetun and port forwarding behavior.

I use Gluetun to ensure certain Docker containers communicate exclusively over a VPN tunnel. The container itself has been very reliable, but port forwarding introduced some recurring friction.

I originally used Mullvad VPN and later learned that they do not support port forwarding. While that is not an issue for many use cases, it becomes limiting when running services that benefit from an externally reachable port.

To resolve this, I migrated to Proton VPN. With Gluetun, the forwarded port is exposed through temporary files, which makes it easy to retrieve and use with other services such as qBittorrent.

The workflow functioned as expected, but there was one persistent problem. Whenever the VPN session reset or a container restarted, the forwarded port changed. Each time this happened, I had to manually update the listening port.

That quickly became tedious.

### Automation Approach

My goal was simply to remove the manual step.

I implemented a small Python script that handles the entire process:

- Reads credentials from an environment file  
- Validates or generates an API session cookie  
- Retrieves the current qBittorrent listening port  
- Reads Gluetun’s forwarded port value  
- Compares both values  
- Updates the port when necessary  

The script runs as a cron job every five minutes. In practice, this makes port changes invisible from an operational perspective.

After restarts or VPN reconnections, everything now corrects itself without intervention.

---

## Storage Migration: SMB to NFS

I also migrated my primary share from SMB to NFS.

This change was driven by some inconsistent file access behavior observed during active seeding. SMB worked well overall, but NFS is generally more predictable in Linux-heavy environments.

Initial results have been encouraging. Permissions and file access patterns appear cleaner, and interactions with containers feel more consistent.

I plan to continue monitoring this change and will document any notable findings in future entries.

---

## Gluetun Health Check Adjustment

One smaller improvement involved refining my Gluetun health check logic.

On rare occasions, the VPN tunnel would establish successfully but no forwarded port would be assigned. From a connectivity standpoint everything looked healthy, yet dependent services would not behave as expected.

To make this failure mode more visible, I modified the health validation to ensure the forwarded port file both exists and contains a valid value.

This provides a more accurate indication of whether the container is fully operational.

---

## Closing Notes

This week’s work centered on reducing manual maintenance and improving reliability. These changes do not alter the architecture in any major way, but they remove small sources of friction that accumulate over time.

As usual, incremental improvements tend to deliver the most noticeable quality-of-life gains.
